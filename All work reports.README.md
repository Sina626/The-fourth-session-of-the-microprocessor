

## درس ریزپردازنده

نام دانشجو:سینا عربشاهی / مرتضی محاسبتی

استاد درس: دکترعباسی

## گزارش پروژه آردوینو: کنترل LEDها با دکمه


---

1. مقدمه

این پروژه شامل طراحی و پیاده‌سازی مداری ساده با استفاده از برد آردوینو است که در آن پنج LED و یک دکمه به برد متصل شده‌اند. هدف اصلی این پروژه، کنترل LEDها به‌صورت ترتیبی با استفاده از دکمه است. با فشردن دکمه، یک دنباله روشن و خاموش شدن LEDها به ترتیب مشخص اجرا می‌شود. این پروژه برای درک نحوه استفاده از ورودی‌ها و خروجی‌های دیجیتال و همچنین پیاده‌سازی توابع در کدنویسی آردوینو طراحی شده است.


---

2. تجهیزات و قطعات مورد نیاز

برد آردوینو: به‌عنوان واحد پردازش اصلی برای کنترل LEDها و دریافت ورودی از دکمه.

پنج LED: که به ترتیب و در یک دنباله روشن و خاموش می‌شوند.

پنج مقاومت 220 اهم: جهت محدود کردن جریان عبوری از LEDها.

دکمه یا پوش‌باتن: برای فعال‌سازی دنباله روشن و خاموش شدن LEDها.

بورد بورد و سیم‌های اتصال: برای ساخت مدار و اتصال قطعات.



---

3. شرح مدار

این مدار از پنج LED و یک دکمه تشکیل شده است. پین‌های دیجیتال آردوینو به LEDها و دکمه متصل شده‌اند. دکمه به عنوان ورودی عمل می‌کند و در صورتی که فشار داده شود، سیگنال دیجیتال HIGH را به آردوینو ارسال می‌کند. LEDها به صورت خروجی تنظیم شده‌اند تا بتوانند در پاسخ به دستورهای کدنویسی روشن یا خاموش شوند.


---

4. عملکرد کد

در قسمت setup، پین‌های LED به عنوان خروجی و پین دکمه به عنوان ورودی تنظیم می‌شوند.

در حلقه اصلی (loop)، وضعیت دکمه بررسی می‌شود. اگر دکمه فشار داده شده باشد (وضعیت HIGH)، تابع lightSequence فراخوانی می‌شود تا دنباله‌ای از روشن و خاموش شدن LEDها را اجرا کند.

در تابع lightSequence، LEDها یکی پس از دیگری روشن و خاموش می‌شوند. زمان‌بندی این دنباله با استفاده از دستور delay کنترل می‌شود که باعث می‌شود هر LED قبل از خاموش شدن LED بعدی برای مدت کوتاهی روشن بماند.



---

5. نکات برنامه‌نویسی و بهینه‌سازی

این پروژه با استفاده از آرایه‌ای از پین‌ها برای LEDها و توابع جداگانه برای ساده‌سازی و سازماندهی کد نوشته شده است. این روش امکان مدیریت ساده‌تر تعداد زیادی از LEDها و استفاده مجدد از کد را فراهم می‌کند. همچنین استفاده از تابع مجزا برای دنباله روشن و خاموش شدن LEDها به ما امکان می‌دهد در آینده به راحتی این دنباله را تغییر دهیم یا زمان‌بندی آن را بهینه‌سازی کنیم.


---

6. نتیجه‌گیری

پروژه کنترل LEDها با دکمه، مثال ساده‌ای از کاربرد ورودی و خروجی دیجیتال و پیاده‌سازی دنباله‌ای از دستورات در آردوینو است. این پروژه نشان داد که چگونه می‌توان با استفاده از توابع و تنظیمات ساده، یک مدار با کاربرد مشخص را طراحی و پیاده‌سازی کرد. این پروژه به دانشجو کمک می‌کند تا با مباحث پایه‌ای در برنامه‌نویسی آردوینو و نحوه تعامل سخت‌افزار و نرم‌افزار آشنا شود و به عنوان مقدمه‌ای برای پروژه‌های پیچیده‌تر مفید خواهد بود.


---
## گزارش پروژه آردوینو: روشن کردن تصادفی LED با استفاده از دکمه


---

1. مقدمه

این پروژه شامل طراحی مداری ساده با استفاده از برد آردوینو است که در آن شش LED و یک دکمه به برد متصل شده‌اند. هدف این پروژه، کنترل تصادفی LEDها با فشردن دکمه است. به این صورت که با هر بار فشردن دکمه، یکی از LEDها به‌صورت تصادفی روشن می‌شود. این پروژه علاوه بر معرفی نحوه استفاده از ورودی‌ها و خروجی‌های دیجیتال، امکان آشنایی با توابع تولید اعداد تصادفی در آردوینو را فراهم می‌آورد.


---

2. تجهیزات و قطعات مورد نیاز

برد آردوینو: برای اجرای برنامه و کنترل LEDها و دکمه.

شش LED: که به صورت تصادفی یکی از آن‌ها روشن خواهد شد.

شش مقاومت 220 اهم: برای محدود کردن جریان عبوری از LEDها و جلوگیری از آسیب دیدن آن‌ها.

یک دکمه (پوش‌باتن): برای فعال‌سازی روشن شدن تصادفی LEDها.

بورد بورد و سیم‌های اتصال: برای ساخت مدار و اتصال قطعات.



---

3. شرح مدار

در این مدار شش LED و یک دکمه به پین‌های دیجیتال آردوینو متصل شده‌اند. دکمه به عنوان ورودی (input) عمل می‌کند، و در صورتی که فشار داده شود، سیگنال دیجیتال HIGH را به برد آردوینو ارسال می‌کند. هر LED نیز به صورت خروجی (output) تعریف شده است تا بتواند به ترتیب و به صورت تصادفی روشن و خاموش شود.


---

4. عملکرد کد

در بخش setup، پین‌های LED به عنوان خروجی و پین دکمه به عنوان ورودی تنظیم می‌شوند. همچنین تابع randomSeed برای تولید اعداد تصادفی بر اساس نویز دریافتی از پین آنالوگ ۰ تنظیم می‌شود.

در حلقه loop، ابتدا وضعیت فعلی دکمه بررسی می‌شود. اگر وضعیت دکمه از LOW به HIGH تغییر کرده باشد (به معنای فشرده شدن دکمه)، یک عدد تصادفی بین 1 تا 6 تولید می‌شود و در متغیر randomNumber ذخیره می‌گردد.

پس از تولید عدد تصادفی، آردوینو با استفاده از این عدد مشخص می‌کند که کدام LED روشن شود و سایر LEDها خاموش می‌شوند. عدد تصادفی و شماره LED روشن شده در سریال مانیتور چاپ می‌شود تا در صورت نیاز برای آزمایش مدار، تغییرات مشاهده شوند.



---

5. نکات برنامه‌نویسی و بهینه‌سازی

در این کد، از تابع random برای تولید اعداد تصادفی استفاده شده است. تابع randomSeed نیز جهت بهبود تصادفی بودن اعداد به‌کار می‌رود.

استفاده از متغیر lastButtonState به ما کمک می‌کند تا فقط یک بار در لحظه فشرده شدن دکمه LEDها کنترل شوند و از تکرار دستورات جلوگیری شود.

نمایش عدد تصادفی در سریال مانیتور علاوه بر کمک به تست، امکان بررسی عملکرد صحیح مدار را فراهم می‌کند و در صورت نیاز به اشکال‌یابی مفید است.



---

6. نتیجه‌گیری

پروژه روشن کردن تصادفی LED با دکمه، به‌خوبی مفهوم تولید اعداد تصادفی و کنترل ورودی و خروجی دیجیتال را در آردوینو آموزش می‌دهد. این پروژه با توجه به کاربرد تابع random و randomSeed، دانشجویان را با نحوه تولید اعداد تصادفی در برنامه‌نویسی آردوینو و کاربرد آن‌ها در پروژه‌های عملی آشنا می‌سازد. همچنین، پیاده‌سازی کنترل وضعیت دکمه از طریق تغییرات وضعیت آن، از تکرار دستورات جلوگیری می‌کند و کد را بهینه‌تر می‌سازد.

## گزارش پروژه آردوینو: کنترل شدت روشنایی LED با ولتاژ آنالوگ



---

1. مقدمه

این پروژه شامل طراحی مداری ساده با استفاده از برد آردوینو است که در آن یک LED و یک ورودی آنالوگ به برد متصل شده‌اند. هدف اصلی این پروژه کنترل شدت روشنایی LED بر اساس ولتاژ ورودی است. در این پروژه، از طریق خواندن مقدار ورودی آنالوگ و تبدیل آن به سیگنال PWM، شدت روشنایی LED به‌طور پیوسته تغییر می‌کند. این پروژه برای آشنایی با خواندن ورودی‌های آنالوگ و استفاده از آن‌ها برای کنترل خروجی‌ها مفید است.


---

2. تجهیزات و قطعات مورد نیاز

برد آردوینو: برای کنترل LED و دریافت ورودی آنالوگ.

یک LED: که شدت روشنایی آن بر اساس مقدار ورودی آنالوگ تنظیم می‌شود.

مقاومت 220 اهم: برای محدود کردن جریان LED و جلوگیری از آسیب دیدن آن.

پتانسیومتر (یا هر منبع ولتاژ آنالوگ): برای ایجاد سیگنال ولتاژ آنالوگ که به ورودی آنالوگ آردوینو متصل می‌شود.

بورد بورد و سیم‌های اتصال: برای ساخت مدار و اتصال قطعات.



---

3. شرح مدار

در این مدار، یک LED به یکی از پین‌های PWM (پین 9) آردوینو متصل شده است و یک پتانسیومتر نیز به پین آنالوگ A0 متصل می‌شود. پتانسیومتر به عنوان منبع ولتاژ متغیر استفاده می‌شود. هنگامی که ولتاژ توسط پتانسیومتر تغییر می‌کند، این ولتاژ به‌عنوان ورودی آنالوگ به آردوینو ارسال می‌شود و آردوینو با استفاده از این مقدار، شدت روشنایی LED را کنترل می‌کند.


---

4. عملکرد کد

در بخش setup، پین LED به عنوان خروجی تعریف می‌شود.

در حلقه loop، ابتدا مقدار ولتاژ ورودی از پین آنالوگ خوانده شده و در متغیر val ذخیره می‌شود. تابع analogRead مقدار ورودی آنالوگ را به عددی بین 0 تا 1023 تبدیل می‌کند.

سپس مقدار val بر 4 تقسیم می‌شود تا به محدوده 0 تا 255 برسد (زیرا تابع analogWrite مقادیر بین 0 تا 255 را می‌پذیرد). مقدار به‌دست‌آمده به پین LED ارسال می‌شود تا شدت روشنایی LED بر اساس مقدار ورودی آنالوگ تنظیم شود.



---

5. نکات برنامه‌نویسی و بهینه‌سازی

در این پروژه، تقسیم مقدار val بر 4 به ما کمک می‌کند تا آن را به محدوده‌ی موردنیاز analogWrite تبدیل کنیم.

استفاده از پتانسیومتر یا ورودی آنالوگ به عنوان کنترل‌کننده ولتاژ باعث می‌شود تا شدت روشنایی LED به طور پیوسته و خطی تغییر کند.

برای جلوگیری از نویز و بهبود کارکرد مدار، می‌توان از یک خازن کنار پین آنالوگ استفاده کرد تا ولتاژ آنالوگ پایدارتر شود.



---

6. نتیجه‌گیری

پروژه کنترل شدت روشنایی LED با ورودی آنالوگ، به خوبی نشان‌دهنده چگونگی تبدیل یک سیگنال آنالوگ به سیگنال PWM و استفاده از آن برای کنترل خروجی‌های دیجیتال در آردوینو است. این پروژه علاوه بر معرفی خواندن ورودی‌های آنالوگ و استفاده از توابع analogRead و analogWrite، به دانشجویان کمک می‌کند تا با کاربرد سیگنال‌های PWM در کنترل شدت نور آشنا شوند و پایه‌ای برای پروژه‌های پیچیده‌تر فراهم می‌آورد.

## گزارش پروژه آردوینو: اندازه‌گیری ولتاژ با استفاده از پتانسیومتر


---

1. مقدمه

این پروژه شامل طراحی مداری ساده با استفاده از برد آردوینو است که در آن ولتاژ خروجی یک پتانسیومتر اندازه‌گیری و در سریال مانیتور نمایش داده می‌شود. هدف این پروژه، خواندن مقدار آنالوگ از پتانسیومتر و تبدیل آن به ولتاژ معادل بر حسب ولت است. این پروژه به‌عنوان مثال پایه‌ای برای خواندن ورودی‌های آنالوگ و تبدیل آن به مقادیر قابل فهم (مانند ولتاژ) در آردوینو کاربرد دارد.


---

2. تجهیزات و قطعات مورد نیاز

برد آردوینو: برای خواندن مقدار آنالوگ و پردازش داده‌ها.

پتانسیومتر: برای تولید سیگنال ولتاژ متغیر جهت اندازه‌گیری.

بورد بورد و سیم‌های اتصال: برای اتصال پتانسیومتر به برد آردوینو و ساخت مدار.



---

3. شرح مدار

در این مدار، پین وسط پتانسیومتر به پین آنالوگ A0 آردوینو متصل شده است. دو سر دیگر پتانسیومتر به ولتاژ 5 ولت و زمین (GND) متصل می‌شوند. با چرخاندن پتانسیومتر، ولتاژ خروجی بین 0 تا 5 ولت تغییر می‌کند و مقدار این ولتاژ توسط آردوینو اندازه‌گیری می‌شود.


---

4. عملکرد کد

در بخش setup، ارتباط سریال با نرخ 9600 بیت بر ثانیه شروع می‌شود تا مقادیر ولتاژ در سریال مانیتور نمایش داده شود.

در حلقه loop، ابتدا مقدار آنالوگ از پین A0 خوانده شده و در متغیر sensorValue ذخیره می‌شود. این مقدار بین 0 تا 1023 متغیر است و نشان‌دهنده سطح ولتاژ ورودی است.

سپس مقدار sensorValue به ولتاژ بر حسب ولت تبدیل می‌شود. با توجه به محدوده 0 تا 5 ولت برای پتانسیومتر و تقسیم این بازه به 1024 سطح، هر واحد آنالوگ معادل تقریباً 0.0049 ولت است (5.0/1023).

مقدار ولتاژ به‌دست‌آمده سپس در سریال مانیتور چاپ می‌شود و پس از یک ثانیه، مقدار جدیدی خوانده و نمایش داده می‌شود.



---

5. نکات برنامه‌نویسی و بهینه‌سازی

تبدیل مقدار آنالوگ به ولتاژ با استفاده از ضریب (5.0 / 1023.0) انجام می‌شود تا نتایج دقیق‌تری از ولتاژ واقعی پتانسیومتر به دست آید.

تاخیر 1 ثانیه‌ای در حلقه باعث می‌شود که مقدار ولتاژ به صورت پایدار و به‌روز در سریال مانیتور نمایش داده شود و از ایجاد نویز و تغییرات ناگهانی جلوگیری شود.



---

6. نتیجه‌گیری

پروژه اندازه‌گیری ولتاژ با پتانسیومتر، دانشجویان را با نحوه خواندن مقادیر آنالوگ در آردوینو و تبدیل آن به ولتاژ واقعی آشنا می‌کند. این پروژه همچنین اهمیت استفاده از مبدل آنالوگ به دیجیتال (ADC) و تبدیل سیگنال‌های پیوسته به اعداد دیجیتال قابل فهم در برنامه‌نویسی آردوینو را نشان می‌دهد. این مباحث پایه‌ای برای پروژه‌های پیچیده‌تر که نیاز به اندازه‌گیری و پردازش سیگنال‌های آنالوگ دارند، مفید خواهد بود.

## گزارش پروژه آردوینو: تغییر تدریجی شدت روشنایی LED


---

1. مقدمه

این پروژه شامل طراحی و پیاده‌سازی مداری ساده با استفاده از برد آردوینو است که در آن یک LED با شدت روشنایی متغیر کنترل می‌شود. هدف اصلی این پروژه، ایجاد یک تغییر تدریجی (fade) در شدت روشنایی LED است که به‌صورت پیوسته افزایش و سپس کاهش می‌یابد. این پروژه به دانشجویان کمک می‌کند تا با نحوه تولید سیگنال PWM و استفاده از آن برای کنترل شدت روشنایی در آردوینو آشنا شوند.


---

2. تجهیزات و قطعات مورد نیاز

برد آردوینو: به عنوان واحد کنترل و اجرای برنامه.

یک LED: که شدت روشنایی آن با استفاده از PWM به‌طور تدریجی تغییر می‌کند.

مقاومت 220 اهم: برای محدود کردن جریان عبوری از LED و جلوگیری از آسیب دیدن آن.

بورد بورد و سیم‌های اتصال: برای اتصال قطعات و ساخت مدار.



---

3. شرح مدار

در این مدار، یک LED به پین دیجیتال 9 آردوینو متصل شده است. این پین قابلیت PWM دارد، که به ما امکان می‌دهد شدت روشنایی LED را به‌صورت تدریجی کنترل کنیم. برای جلوگیری از عبور جریان بیش از حد از LED، یک مقاومت 220 اهمی در مدار به‌صورت سری با LED قرار داده شده است.


---

4. عملکرد کد

در بخش setup، پین LED به عنوان خروجی تنظیم می‌شود.

در حلقه loop، ابتدا با استفاده از یک حلقه for مقدار متغیر brightness از 0 تا 255 افزایش می‌یابد و در هر تکرار، مقدار جدیدی از brightness به LED اعمال می‌شود. این تغییرات باعث افزایش تدریجی شدت روشنایی LED می‌شود.

پس از رسیدن brightness به حداکثر مقدار (255)، حلقه دیگری brightness را از 255 به 0 کاهش می‌دهد که باعث کاهش تدریجی روشنایی LED می‌شود.

هر بار که شدت روشنایی LED تغییر می‌کند، یک تاخیر 10 میلی‌ثانیه‌ای اعمال می‌شود تا تغییرات به صورت تدریجی و نرم دیده شود.



---

5. نکات برنامه‌نویسی و بهینه‌سازی

استفاده از حلقه‌های for برای تغییر تدریجی مقدار brightness، کد را ساده و خوانا کرده است.

تاخیر 10 میلی‌ثانیه‌ای بین هر تغییر، موجب می‌شود تغییرات روشنایی برای چشم انسان نرم و قابل مشاهده باشد. این مقدار قابل تنظیم است و با تغییر آن می‌توان سرعت تغییرات روشنایی را افزایش یا کاهش داد.

استفاده از PWM در پین دیجیتال باعث می‌شود که LED به‌صورت پیوسته و با توجه به مقدار brightness روشن و خاموش شود و در نتیجه، به نظر می‌رسد که شدت نور آن به صورت تدریجی تغییر می‌کند.



---

6. نتیجه‌گیری

این پروژه، تغییر تدریجی شدت روشنایی LED را به خوبی نشان می‌دهد و به دانشجویان امکان می‌دهد با مفهوم PWM و کاربرد آن در کنترل روشنایی آشنا شوند. علاوه بر این، این پروژه پایه‌ای برای پروژه‌های پیچیده‌تر در کنترل روشنایی و سایر وسایل با استفاده از سیگنال PWM است و می‌تواند در پروژه‌های مرتبط با نورپردازی و کنترل موتورهای کوچک به کار رود.
